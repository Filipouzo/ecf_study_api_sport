{% extends 'base.html.twig' %}

{% block title %}{{ pageName }}{% endblock %}

{% block body %}
	{% include "partials/_navbar.html.twig" %}
	<div class="wrapper">

		{# affichage Role administrateur #}
		{% if is_granted('ROLE_ADMINISTRATEUR') %}

		<h4>Liste des <strong>{{ userToAdmin }}s</strong> :</h4>

			<div class="mt-5 row">
				<div class="col-sm-12 col-lg-6">
					<form class="d-flex">
						<input class="form-control me-sm-2" type="text" placeholder="Chercher">
						<button class="btn btn-secondary my-2 my-sm-0" type="submit">
							<font style="vertical-align: inherit;">
								<font style="vertical-align: inherit;">Chercher</font>
							</font>
						</button>
					</form>
				</div>
			</div>

			<table class="mt-5 table">
				<thead>
					
					{% if userToAdmin == 'structure' %}
					<th>Franchise</th>
					<th>Adresse</th>
					{% else %}
					<th>Nom</th>
					{% endif %}
					<th>Email</th>
					{% if userToAdmin != 'administrateur' %}
					<th>Actif</th>
					{% endif %}
					<th>Supprimer</th>
				</thead>

				<tbody>
					{% for user in users %}
						<tr>
							{% if userToAdmin == 'structure' %}
							<td>{{ user.parent.name }}</td>
							<td>{{ user.address }}</td>
							{% else %}
							<td>{{ user.name }}</td>
							{% endif %}

							<td>{{ user.email }}</td>
							{% if userToAdmin != 'administrateur' %}
							<td>
								{{ user.activated ? 'OUI' : 'NON' }}
							</td>
							{% endif %}
							<td>
								{# TODO ajouter la réference du bouton #}
								
								{# <input type="image" id="rules" class="col h-100 p-1 pr-md-2" data-toggle="modal" data-target="#popupRules" src="{{ asset('/Pictures/logo.PNG') }}"> #}
								{# <a href="{{ path('are_you_sure') }}" class="btn btn-warning">Supprimer</a> #}
								<a  class="dt-button buttons-collection buttons-colvis btn btn-white btn-primary btn-bold"                     
								data-toggle="modal"
								data-target="#popupRules"
								href="#"
								>supprimer </a>
							</td>
						</tr>

					{% else %}
						<tr>
							<td>Il n'y a pas d'enregistrement pour ce tableau</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			
			<div class="mt-5 row">
				<div class="col-sm-12 col-lg-6">
					<a href="{{ path('administrateur_creation',{'userToAdmin': userToAdmin }) }}" class="btn btn-primary">Ajouter un nouvel  enregistrement : <strong>{{ userToAdmin }}</strong></a>
				</div>
			</div>
		{% endif %}



		{# affichage Role partenaire #}
		{% if is_granted('ROLE_PARTENAIRE') %}

		<h4>Liste de vos structures</strong> :</h4>

			<table class="mt-5 table">
				<thead>
					<th>Adresse</th>
					<th>Email</th>
					<th>Actif</th>
				</thead>

				<tbody>
					{% for user in users %}
						<tr>
							<td>{{ user.address }}</td>
							<td>{{ user.email }}</td>
							<td>
								{{ user.activated ? 'OUI' : 'NON' }}
							</td>
						</tr>

					{% else %}
						<tr>
							<td>Il n'y a pas d'enregistrement pour ce tableau</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% endif %}
	</div>
{% endblock %}




{# Code de vérification Role
								<td>
										{% for role in user.roles %}
											{% if role == "ROLE_ADMINISTRATEUR" %}
												Administrateur
											{% elseif role == "ROLE_PARTENAIRE" %}
												Partenaire
											{% elseif role == "ROLE_STRUCTURE" %}
												Structure
											{% endif %}
										{% endfor %}
									</td> #}